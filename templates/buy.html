<!-- templates/buy.html -->
{% extends "base.html" %}

{% block title %}Browse Available Listings{% endblock %}

{% block content %}
<div class="container">
  

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-message card">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {% if buckets %}
        <div class="grid">
            {% for bucket in buckets %}
            <a href="{{ url_for('buy.view_bucket', bucket_id=bucket['bucket_id']) }}" class="product-tile">
                <div class="image-box">
                    <span>Item image</span>  <!-- Placeholder text; image can go here later -->
                </div>
                <div class="product-text">
                    <p class="product-title">
                        {{ bucket['mint'] }} {{ bucket['product_line'] or bucket['coin_series'] or bucket['product_type'] }}
                    </p>
                    <p class="product-subtext">{{ bucket['weight'] }}, {{ bucket['metal'] }} {{ bucket['grade'] }} {{ bucket['year'] }}</p>
                    {% if bucket['lowest_price'] is not none %}
                        <p class="price">${{ bucket['lowest_price'] }}</p>
                    {% else %}
                        <p class="price no-listings">No listings available</p>
                    {% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
    
    
    {% else %}
        <p class="empty-message">No active listings available right now.</p>
    {% endif %}
</div>
{% endblock %}
