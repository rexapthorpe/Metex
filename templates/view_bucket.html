{% extends "base.html" %}
{% block title %}View Item{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/bucket.css') }}?v=bucket-v7-bidder"/>
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/bucket_ID_sellers_modal.css') }}?v=bucket-v2"/>
<link rel="stylesheet" href="{{ url_for('static', filename='css/pricing_badges.css') }}?v=1"/>

<div id="popup-message-container"></div>

<div class="bucket-page">
  <!-- Top-half two-column layout (65% / 35%) -->
  <div class="bucket-card two-col-6535">

    <!-- ====================== LEFT COLUMN (65%) ====================== -->
    <section class="left-col" aria-label="Gallery and Description">
      <!-- Gallery -->
      <div class="gallery">
        <div class="gallery-main" id="galleryMain" aria-live="polite">
          {% set has_images = images and images|length > 0 %}

          <button class="gal-arrow left" id="galPrev" aria-label="Previous image"
                  {% if not has_images or images|length < 2 %}disabled{% endif %}>‹</button>

          {% if has_images %}
            <img src="{{ images[0] }}" alt="Item image" id="mainImage">
          {% else %}
            <div id="mainImagePlaceholder" class="gallery-ph" aria-label="Image placeholder"></div>
          {% endif %}

          <button class="gal-arrow right" id="galNext" aria-label="Next image"
                  {% if not has_images or images|length < 2 %}disabled{% endif %}>›</button>

          <div class="gal-dots" id="galDots">
            {% if has_images %}
              {% for i in range(images|length) %}
                <span class="dot {{ 'active' if i == 0 else '' }}" data-idx="{{ i }}"></span>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <!-- Thumbs row -->
        <div class="thumbs-row">
          <div class="thumbs">
            {% if has_images %}
              <button class="thumb" data-idx="0" aria-label="Show first image">
                <img src="{{ images[0] }}" alt="">
              </button>
              <button class="thumb" data-idx="1" aria-label="Show second image">
                <img src="{{ images[1] if images|length>1 else images[0] }}" alt="">
              </button>
            {% else %}
              <div class="thumb ph" aria-hidden="true"></div>
              <div class="thumb ph" aria-hidden="true"></div>
            {% endif %}
          </div>

          <div class="sell-stack">
            <div class="sell-kicker soft">List an Item?</div>
            <a class="sell-circle-btn" href="/sell" aria-label="Go to sell page">Sell</a>
          </div>
        </div>

      </div>

      <!-- Item Description tile -->
      <article class="content-tile description-tile">
        <h3 class="section-heading">Item Description</h3>

        <div class="specs-two-col">
          <div class="spec-col">
            <div class="spec-row"><span class="spec-label">Metal</span><span class="spec-value">{{ specs['Metal'] or '--' }}</span></div>
            <div class="spec-row"><span class="spec-label">Product line</span><span class="spec-value">{{ specs['Product line'] or '--' }}</span></div>
            <div class="spec-row"><span class="spec-label">Product type</span><span class="spec-value">{{ specs['Product type'] or '--' }}</span></div>
            <div class="spec-row"><span class="spec-label">Weight</span><span class="spec-value">{{ specs['Weight'] or '--' }}</span></div>
            <div class="spec-row"><span class="spec-label">Grade</span><span class="spec-value">{{ specs['Grading'] or '--' }}</span></div>
          </div>
          <div class="spec-col">
            <div class="spec-row"><span class="spec-label">Year</span><span class="spec-value">{{ specs['Year'] or '--' }}</span></div>
            <div class="spec-row"><span class="spec-label">Mint</span><span class="spec-value">{{ specs['Mint'] or '--' }}</span></div>
            <div class="spec-row"><span class="spec-label">Purity</span><span class="spec-value">{{ specs['Purity'] or '--' }}</span></div>
            <div class="spec-row"><span class="spec-label">Finish</span><span class="spec-value">{{ specs['Finish'] or '--' }}</span></div>
          </div>
        </div>

        <div class="subsection">
          <h4 class="section-heading">History of the Item</h4>
          <p class="item-history"></p>
          <p class="item-description">
            {{ bucket['description'] if bucket['description'] else '—' }}
          </p>
        </div>
      </article>
    </section>

    <!-- ====================== RIGHT COLUMN (35%) ====================== -->
    <aside class="right-col content-tile" aria-label="Purchase and Bid Controls">

      <!-- Title aligned with top of image -->
      <h1 class="right-title">
        {% set title_parts = [bucket['Weight'], specs['Year'], bucket['metal'], specs['Product line'], specs['Purity'], bucket['product_type']] | select | list %}
        {{ title_parts | join(' ') }}
      </h1>

      {% if specs['Mint'] %}
        <p class="title-soft">Minted from the {{ specs['Mint'] }}</p>
      {% endif %}
      <hr class="divider">

      <!-- Sellers header/button/link -->
      <div class="sellers-cta">
        <div class="sellers-kicker">See all available sellers</div>
        <button id="openSellersBtn" class="btn sellers-btn" type="button">View All Sellers</button>
        <div class="sellers-foot">
          <a href="/sell?metal={{ bucket.metal or '' }}&product_line={{ bucket.product_line or '' }}&product_type={{ bucket.product_type or '' }}&weight={{ bucket.weight or '' }}&purity={{ bucket.purity or '' }}&mint={{ bucket.mint or '' }}&year={{ bucket.year or '' }}&finish={{ bucket.finish or '' }}&grade={{ bucket.grade or '' }}" class="sellers-foot-link">List this item?</a>
        </div>
      </div>
      <hr class="divider">

      <!-- ===================== Accept Best Bid ===================== -->
      <section class="best-bid" id="bestBidBlock" aria-label="Accept best bid">
        {% if best_bid %}
          {% set max_qty = best_bid['remaining_quantity'] or best_bid['quantity_requested'] or 0 %}
          <div class="bb-grid">
            <div class="bb-colL">
              <div class="bb-row1">
                <button class="btn best-bid-accept-btn" id="bbActionBtn" aria-expanded="false">Accept Bid</button>
              </div>
              <div class="bb-row2">
                <a href="#bidsSection" id="seeAllBidsLink" class="soft-link">See all bids</a>
              </div>
            </div>

            <div class="bb-colR">
              <div class="bb-row1r">
                <div class="best-bid-price price-box" id="bestBidPriceBox">
                  <div id="bestBidPrice">${{ '%.2f'|format(best_bid.get('effective_price', best_bid['price_per_coin'])) }} USD</div>
                  <div class="soft">Best bid per item
                    {% if best_bid.get('pricing_mode') == 'premium_to_spot' %}
                      <span style="font-size: 11px; color: #4caf50; font-weight: 600;"> (Variable)</span>
                    {% endif %}
                  </div>
                </div>

                <div class="bb-r1-flex" id="bbR1Flex">
                  <div class="dial-pill" id="acceptQtyDial" data-max="{{ max_qty }}" hidden>
                    <button type="button" class="dial-btn minus" id="acceptQtyMinus" aria-label="Decrease quantity">−</button>
                    <div class="dial-value" id="acceptQtyValue">1</div>
                    <button type="button" class="dial-btn plus" id="acceptQtyPlus" aria-label="Increase quantity">+</button>
                  </div>
                  <button class="bb-close" id="bbCloseBtn" aria-label="Cancel" hidden>×</button>
                </div>
              </div>

              <div class="bb-spacer" id="bbSpacer" aria-hidden="true"></div>
            </div>
          </div>
        {% else %}
          <div class="best-bid-row disabled">
            <button class="btn best-bid-accept-btn" disabled>Accept Bid</button>
            <div class="best-bid-price">
              <div id="bestBidPrice">—</div>
              <div class="soft">No bids yet</div>
            </div>
          </div>
          <a href="#bidsSection" id="seeAllBidsLink" class="soft-link">See all bids</a>
        {% endif %}
      </section>

      <hr class="divider">





      <!-- ===================== Grading filter tile (collapsible) ===================== -->
      <section class="grading-tile" id="gradingTile" aria-label="Require 3rd Party Grading">
        <div class="soft grading-kicker">Filter for professionally graded items</div>
        <button type="button" id="gradingToggleBtn" class="btn grading-toggle-btn" aria-expanded="false" aria-controls="gradingPanel">
          Require 3rd Party Grading?
          <span class="chev" aria-hidden="true">▸</span>
        </button>

        <div id="gradingPanel" class="grading-panel" hidden>
          <div class="grading-rows">
            <div class="grading-row">
              <div class="glabel">Any Grader</div>
              <label class="toggle">
                <input type="checkbox" id="switchAny" autocomplete="off" {% if graded_only and any_grader %}checked{% endif %}>
                <span class="slider"></span>
              </label>
            </div>
            <div class="grading-row">
              <div class="glabel">PCGS</div>
              <label class="toggle">
                <input type="checkbox" id="switchPCGS" autocomplete="off" {% if graded_only and pcgs %}checked{% endif %}>
                <span class="slider"></span>
              </label>
            </div>
            <div class="grading-row">
              <div class="glabel">NGC</div>
              <label class="toggle">
                <input type="checkbox" id="switchNGC" autocomplete="off" {% if graded_only and ngc %}checked{% endif %}>
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <hr class="divider">

      <!-- ===================== Price / Buy block (now dynamically switchable) ===================== -->
      {% set in_stock = availability['total_available'] > 0 %}
      <div id="buyControls" {% if not in_stock %}style="display:none"{% endif %}>
        {% if availability['lowest_price'] %}
          <div class="buy-block">
            <div class="best-ask-text">Best Ask</div>
            <div class="buy-price" aria-label="Current price">
              <span class="buy-price-amount" id="buyPriceAmount">${{ '%.2f'|format(availability['lowest_price']) }} USD</span>
              <span class="soft">per item</span>
            </div>
          </div>
        {% else %}
          <div class="buy-price" aria-label="Current price">
            <span class="buy-price-amount" id="buyPriceAmount">—</span>
            <span class="soft">No active listings</span>
          </div>
        {% endif %}

        <!-- Dynamic Pricing Info Notice -->
        {% set has_dynamic_pricing = listings|selectattr('pricing_mode', 'equalto', 'premium_to_spot')|list|length > 0 %}
        {% if has_dynamic_pricing %}
        <div class="dynamic-pricing-info">
          <div class="dynamic-pricing-info-title">Dynamic Pricing Active</div>
          <div class="dynamic-pricing-info-text">
            Some listings use Premium-to-Spot pricing and may change based on live metal prices.
          </div>
        </div>
        {% endif %}

        <div class="qty-row">
          <div class="dial-pill buy-qty-pill" id="buyQtyPill" aria-label="Quantity selector" data-max="{{ availability['total_available'] }}">
            <button type="button" class="dial-btn minus" id="buyQtyMinus" aria-label="Decrease quantity">−</button>
            <div class="dial-value" id="buyQtyValue">1</div>
            <button type="button" class="dial-btn plus" id="buyQtyPlus" aria-label="Increase quantity">+</button>
          </div>
          <span class="qty-available" id="qtyAvailable">Only {{ availability['total_available'] }} left</span>
        </div>

        <input type="hidden" id="quantityInput" name="quantity" value="1">

        <!-- Hidden grading inputs updated by JS -->
        <input type="hidden" id="gradedOnlyInput" name="graded_only" value="{{ 1 if graded_only else 0 }}">
        <input type="hidden" id="anyGraderInput" name="any_grader" value="{{ 1 if graded_only and any_grader else 0 }}">
        <input type="hidden" id="pcgsInput" name="pcgs" value="{{ 1 if graded_only and pcgs else 0 }}">
        <input type="hidden" id="ngcInput" name="ngc" value="{{ 1 if graded_only and ngc else 0 }}">

        <form method="POST" action="{{ url_for('checkout.checkout') }}" class="action-buttons">
          <input type="hidden" name="bucket_id" value="{{ bucket['bucket_id'] }}">
          <input type="hidden" name="quantity" id="buyQuantityInput">
          <!-- forward grading too (harmless if checkout ignores) -->
          <input type="hidden" name="graded_only" id="buyGradedOnly">
          <input type="hidden" name="any_grader" id="buyAnyGrader">
          <input type="hidden" name="pcgs" id="buyPcgs">
          <input type="hidden" name="ngc" id="buyNgc">
          <button type="submit" class="btn buy-btn" onclick="syncQuantity('buyQuantityInput')">Buy Item</button>
        </form>

        <!-- NEW: Opens unified bid modal for creating bid -->
        <button type="button" class="btn bid-btn" onclick="openBidModal({{ bucket['id'] }})">Make a Bid</button>
        <!-- OLD: Full page navigation (kept as backup)
        <a class="btn bid-btn" href="{{ url_for('bid.bid_page', bucket_id=bucket['id']) }}">Make a Bid</a>
        -->

        <form method="POST" action="{{ url_for('buy.auto_fill_bucket_purchase', bucket_id=bucket['bucket_id']) }}" class="action-buttons">
          <input type="hidden" name="quantity_to_buy" id="cartQuantityInput">
          <input type="hidden" name="graded_only" id="cartGradedOnly">
          <input type="hidden" name="any_grader" id="cartAnyGrader">
          <input type="hidden" name="pcgs" id="cartPcgs">
          <input type="hidden" name="ngc" id="cartNgc">
          <button type="submit" class="btn add-cart-btn" onclick="syncQuantity('cartQuantityInput')">Add to Cart</button>
        </form>
      </div>

      <p class="out-of-stock" id="outOfStockMsg" {% if in_stock %}style="display:none"{% endif %}>
        Currently out of stock. Check back later or place a bid below.
      </p>

      <!-- NEW: Opens unified bid modal (out of stock state) -->
      <button
        type="button"
        id="outOfStockBidBtn"
        class="btn bid-btn"
        onclick="openBidModal({{ bucket['id'] }})"
        {% if in_stock %}style="display:none"{% endif %}
      >
        Make a Bid
      </button>
      <!-- OLD: Full page navigation (kept as backup)
      <a id="outOfStockBidBtn-old" class="btn bid-btn"
         href="{{ url_for('bid.bid_page', bucket_id=bucket['id']) }}"
         {% if in_stock %}style="display:none"{% endif %} style="display:none">
        Make a Bid
      </a>
      -->


      <hr class="divider">

      <!-- Shipping / Delivery / Payment -->
      <dl class="details-grid" id="shipPayBlock" aria-label="Shipping, delivery, payment">
        <dt>Shipping</dt>
        <dd>Free shipping.
            <span class="insured-by-UPS">Insured by UPS</span>
        </dd>

        <dt>Delivery</dt>
        <dd>Seller has 4 days to ship item at which point it can be tracked. If they fail to do so, the seller forfeits the item and you are refunded your money</dd>

        <dt>Payment Methods</dt>
        <dd>ACH, Bank Transfer, Credit Card, Debit Card</dd>
      </dl>

    </aside>
  </div>
</div>

<!-- ================== FULL-WIDTH BIDS SECTION (anchor target) ================== -->
<section class="content-tile bids-panel" id="bidsSection" aria-label="Bids">
  {% if user_bids %}
  <section aria-label="Your active bids">
    <h3 class="bids-panel-heading">Your Active Bids</h3>

    <div class="account-bid-tiles">
      {% for bid in user_bids if bid['active'] and bid['status']|lower in ['open','pending','partially filled'] %}
        {% set requested = bid['quantity_requested'] or 0 %}
        {% set remaining = bid['remaining_quantity'] if bid['remaining_quantity'] is not none else requested %}
        {% set filled = requested - remaining %}
        <article class="account-bid-tile">
          <div class="abt-top">
            <div class="abt-price">
              ${{ '%.2f' | format(bid.get('effective_price', bid['price_per_coin'])) }}
              <span class="abt-price-suffix">BID</span>
              {% if bid.get('pricing_mode') == 'premium_to_spot' %}
                <span class="pricing-mode-badge variable">Variable</span>
              {% endif %}
            </div>
            <div class="abt-units">{{ requested }} units</div>
          </div>

          {% if bid.get('pricing_mode') == 'premium_to_spot' %}
          <div class="abt-row pricing-info">
            <div class="abt-curr" style="font-size: 12px; color: #4caf50;">
              <strong>Variable Pricing:</strong> Spot + ${{ '%.2f' | format(bid.get('spot_premium', 0)) }}
              {% if bid.get('floor_price') %}
                (Floor: ${{ '%.2f' | format(bid['floor_price']) }})
              {% endif %}
            </div>
          </div>
          {% endif %}

          <div class="abt-row">
            <div class="abt-curr">
              {% if bid['requires_grading'] %}
                Require 3rd party Grading: Yes{% if bid['preferred_grader'] %} ({{ bid['preferred_grader'] }}){% endif %}
              {% else %}
                Require 3rd party Grading: No
              {% endif %}
            </div>
            <div class="abt-filled">Filled: {{ filled }}</div>
          </div>

          {% if bid['created_at'] %}<div class="abt-date">{{ bid['created_at'] }}</div>{% endif %}

          <div class="abt-actions">
            <!-- NEW: Opens unified bid modal for editing -->
            <button type="button" class="abt-action" onclick="openBidModal({{ bucket['id'] }}, {{ bid['id'] }})">
              <i class="fas fa-pencil-alt" aria-hidden="true"></i>
              <span>Edit</span>
            </button>
            <!-- OLD: Full page navigation (kept as backup)
            <form method="GET" action="{{ url_for('bid.edit_bid', bid_id=bid['id']) }}" style="display:none">
              <button type="submit" class="abt-action">
                <i class="fas fa-pencil-alt" aria-hidden="true"></i>
                <span>Edit (Old)</span>
              </button>
            </form>
            -->

            <form method="POST" action="{{ url_for('bid.cancel_bid', bid_id=bid['id']) }}" id="closeBidForm-{{ bid['id'] }}" onsubmit="event.preventDefault(); openCloseBidBuyPageConfirmModal(this);">
              <button type="submit" class="abt-action">
                <i class="fa-solid fa-trash" aria-hidden="true"></i>
                <span>Close</span>
              </button>
            </form>
          </div>
        </article>
      {% else %}
        <p>No open bids.</p>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {% set ns = namespace(has_open=false) %}
  {% if bids %}
    {% for b in bids %}
      {% if b['status']|lower in ['open','pending','partially filled'] %}
        {% set ns.has_open = true %}
      {% endif %}
    {% endfor %}
  {% endif %}

  <form method="POST" action="{{ url_for('bid.accept_bid', bucket_id=bucket['id']) }}" id="accept-bids-form" class="bids-form">
    <div class="bids-header">
      <h3 class="bids-panel-heading">All Open Bids for This Item</h3>

      <div class="bids-actions">
        <!-- NEW: Opens unified bid modal -->
        <button type="button" class="btn bid-btn header-bid-btn" onclick="openBidModal({{ bucket['id'] }})">+ Create a Bid</button>
        <!-- OLD: Full page navigation (kept as backup)
        <a class="btn bid-btn header-bid-btn" href="{{ url_for('bid.bid_page', bucket_id=bucket['id']) }}" style="display:none">+ Create a Bid (Old)</a>
        -->

        {% if ns.has_open %}
          <button type="submit" class="btn accept-bids-btn" id="acceptBidsButton" disabled>Accept Bids</button>
        {% endif %}
      </div>
    </div>

    <h4 class="bids-subtext">Click to select bids</h4>

    <div class="bids-list-wrap">
      {% if bids and ns.has_open %}
        <div class="bids-list">
          {% for bid in bids if bid['status']|lower in ['open','pending','partially filled'] %}
            {% set max_qty = bid['remaining_quantity'] if bid['remaining_quantity'] is not none else bid['quantity_requested'] %}
            <div class="bid-row" data-bid-id="{{ bid['id'] }}" data-max="{{ max_qty }}">
              <input type="checkbox" name="selected_bids" value="{{ bid['id'] }}" class="selected-checkbox" hidden>

              <div class="bid-card-clickable bid-card-visual" role="button" tabindex="0" aria-pressed="false">
                {% if bid['requires_grading'] %}
                <div class="grading-dot" title="This bid requires graded items"></div>
                {% endif %}

                <div class="bid-card-content">
                  <div class="bid-top-row">
                    <div class="bid-price-strong">${{ '%.2f' | format(bid['price_per_coin']) }} BID / unit</div>
                    <div class="bid-units">{{ max_qty }} units</div>
                  </div>

                  <div class="bid-seller">Seller: {{ bid['buyer_name'] }}</div>

                  <div class="bid-meta">
                    <div class="bid-curr">
                      {% if bid['requires_grading'] %}
                        Require 3rd party Grading: Yes{% if bid['preferred_grader'] %} ({{ bid['preferred_grader'] }}){% endif %}
                      {% else %}
                        Require 3rd party Grading: No
                      {% endif %}
                    </div>
                    {% if bid['created_at'] %}<div class="bid-time">{{ bid['created_at'] }}</div>{% endif %}
                  </div>

                  <!-- View Bidder Button -->
                  <div class="bid-actions">
                    <button
                      type="button"
                      class="icon-button view-bidder-btn"
                      title="View Bidder"
                      onclick="event.stopPropagation(); openBidderModal({{ bid['id'] }})">
                      <i class="fa-solid fa-user"></i>
                      <span class="icon-label">View Bidder</span>
                    </button>
                  </div>
                </div>

                <div class="dial-assembly" id="dial_group_[{{ bid['id'] }}]" style="display:none;">
                  <div class="dial-pill" data-bid-id="{{ bid['id'] }}" aria-label="Accepted quantity dial">
                    <div class="dial-fill"></div>
                    <button type="button" class="dial-btn minus" data-bid-id="{{ bid['id'] }}" aria-label="Decrease accepted quantity">−</button>
                    <div class="dial-value">0</div>
                    <button type="button" class="dial-btn plus" data-bid-id="{{ bid['id'] }}" aria-label="Increase accepted quantity">+</button>
                  </div>
                </div>
              </div>

              <input type="hidden" name="accept_qty[{{ bid['id'] }}]" id="accept_qty_{{ bid['id'] }}" value="0">
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>No open bids at this time.</p>
      {% endif %}
    </div>
  </form>
</section>

<!-- ============ Sellers Modal Markup ============ -->
{% include 'modals/bucket_ID_sellers_modal.html' %}

<!-- ============ Bid Bidder Modal ============ -->
{% include 'modals/bid_bidder_modal.html' %}

<!-- ============ NEW: Unified Bid Modal ============ -->
{% include 'modals/bid_modal.html' %}
{% include 'modals/bid_confirm_modal.html' %}

<!-- ============ Accept Bid Modals ============ -->
{% include 'modals/accept_bid_modals.html' %}

<!-- ============ Buy Item Modal ============ -->
{% include 'modals/buy_item_modal.html' %}

<!-- ============ Close Bid Confirmation Modal ============ -->
{% include 'modals/close_bid_buy_page_confirmation_modal.html' %}

<!-- ============ Error Notification Modal ============ -->
{% include 'modals/error_notification_modal.html' %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/confirmation_modal_base.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/cart_sellers_modal.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/order_sellers_modal.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/bid_modal.css') }}?v=1">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/bid_confirm_modal.css') }}?v=1">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/edit_bid_modal.css') }}?v=1">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/accept_bid_modals.css') }}?v=1">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modals/buy_item_modal.css') }}?v=1">

<script>
  window.flashMessages = {{ get_flashed_messages(with_categories=true) | tojson }};
  window.bucketImages  = {{ (images or []) | tojson }};
  window.bestBid       = {{ (best_bid or {}) | tojson }};
  window.bucketId      = {{ bucket['id'] }};
  window.bucketSpecs   = {{ specs | tojson }};
  window.allBids       = {{ (bids or []) | tojson }};
  window.lowestPrice   = {{ availability.lowest_price if availability and availability.lowest_price else 0 }};
</script>
<script src="{{ url_for('static', filename='js/modals/bucket_ID_sellers_modal.js') }}?v=bucket-v2"></script>
<script src="{{ url_for('static', filename='js/modals/bid_bidder_modal.js') }}?v=OVERLAY_FIX"></script>
<script src="{{ url_for('static', filename='js/view_bucket.js') }}?v=bucket-v6"></script>
<script src="{{ url_for('static', filename='js/modals/bid_modal.js') }}?v=1"></script>
<script src="{{ url_for('static', filename='js/modals/bid_confirm_modal.js') }}?v=CALC_FIX"></script>
<script src="{{ url_for('static', filename='js/modals/accept_bid_modals.js') }}?v=1"></script>
<script src="{{ url_for('static', filename='js/modals/buy_item_modal.js') }}?v=1"></script>
<script src="{{ url_for('static', filename='js/modals/error_notification_modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/modals/close_bid_buy_page_confirmation_modal.js') }}"></script>
{% endblock %}
