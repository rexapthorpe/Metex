{# templates/partials/bid_form.html #}
<form id="bid-form" method="POST" action="{{ form_action_url }}">

  <!-- Step 1: Price & Suggestions -->
  <!-- Step 1: Price & Suggestions -->
<div class="step-panel" id="step-1">
  <h3>Edit Your Bid</h3>

  <!-- Metrics: two-column grid -->
  <div class="modal-metrics">
    <!-- left column: labels -->
    <div class="metric-labels">
      <div class="metric-label">ðŸ”¼ Highest Bid:</div>
      <div class="metric-label">ðŸ”½ Current Price:</div>
    </div>
    <!-- right column: values -->
    <div class="metric-values">
      <div class="metric-value">${{ '%.2f'|format(highest_bid) }}</div>
      <div class="metric-value">${{ '%.2f'|format(current_price) }}</div>
    </div>
  </div>

  <!-- Suggestions (unchanged) -->
  <div class="modal-suggestions">
    <button type="button"
            class="suggestion-btn best"
            onclick="setBidPrice({{ best_bid_price }})">
      Best: ${{ '%.2f'|format(best_bid_price) }}
    </button>
    <button type="button"
            class="suggestion-btn good"
            onclick="setBidPrice({{ good_bid_price }})">
      Good: ${{ '%.2f'|format(good_bid_price) }}
    </button>
  </div>

  <!-- Custom Entry: now blank, with min & larger font -->
  <div class="modal-custom">
    <label for="bid-price-input">Enter Custom Bid ($):</label>
    <div class="input-prefix">
      <span>$</span>
      <input type="number"
             name="bid_price"
             id="bid-price-input"
             step="1.00"
             min="1.00"
             placeholder="0000.00"
             required>
    </div>
  </div>

  <!-- Next button (unchanged) -->
  <div class="modal-footer">
    <button type="button" class="next-button" onclick="goToStep(2)">
      Next
    </button>
  </div>
</div>


  <!-- Step 2: Quantity -->
  <div class="step-panel" id="step-2" style="display:none">
    <div class="modal-custom">
      <label for="qty-input">Quantity:</label>
      <input type="number"
             id="qty-input"
             name="bid_quantity"
             value="{{ bid.quantity_requested if bid else '' }}"
             required>
    </div>
    <div class="modal-footer">
      <button type="button" class="next-button" onclick="goToStep(1)">Back</button>
      <button type="button" class="next-button" onclick="goToStep(3)">Next</button>
    </div>
  </div>

  <!-- Step 3: Grading -->
  <div class="step-panel" id="step-3" style="display:none">
    <div class="modal-custom">
      <label for="requires_grading">Require Grading?</label>
      <select name="requires_grading"
              id="requires_grading"
              onchange="toggleGraderDropdown()">
        <option value="" disabled {% if not bid %}selected{% endif %}>Select one</option>
        <option value="no"  {% if bid and not bid.requires_grading %}selected{% endif %}>No</option>
        <option value="yes" {% if bid and bid.requires_grading %}selected{% endif %}>Yes</option>
      </select>

      <div id="grader_dropdown_section" style="display:none; margin-top:10px">
        <label for="preferred_grader">Preferred Grader</label>
        <select name="preferred_grader" id="preferred_grader">
          <option value="">Select One</option>
          <option value="Any"  {% if bid and bid.preferred_grader=='Any' %}selected{% endif %}>Any Grader</option>
          <option value="PCGS" {% if bid and bid.preferred_grader=='PCGS' %}selected{% endif %}>PCGS</option>
          <option value="NGC"  {% if bid and bid.preferred_grader=='NGC' %}selected{% endif %}>NGC</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="next-button" onclick="goToStep(2)">Back</button>
      <button type="button" class="next-button" onclick="goToStep(4)">Next</button>
    </div>
  </div>

  <!-- Step 4: Delivery Address -->
  <div class="step-panel" id="step-4" style="display:none">
    <div class="modal-custom">
      <label for="address-input">Delivery Address:</label>
      <input type="text"
             id="address-input"
             name="delivery_address"
             value="{{ bid.delivery_address if bid else '' }}"
             placeholder="123 Main St, City, State, ZIP"
             required>
    </div>
    <div class="modal-footer">
      <button type="button" class="next-button" onclick="goToStep(3)">Back</button>
      <button type="submit" class="next-button">
        {{ bid and 'Save Changes' or 'Submit Bid' }}
      </button>
    </div>
  </div>

  {% if bid %}
    <input type="hidden" name="bid_id" value="{{ bid.id }}">
  {% endif %}
</form>
