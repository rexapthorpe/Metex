<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout Flow Test</title>

    <!-- Load checkout CSS -->
    <link rel="stylesheet" href="static/css/checkout.css">
    <!-- Load Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
        }
        .test-controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            margin-top: 0;
            color: #333;
        }
        .test-btn {
            padding: 12px 24px;
            margin: 5px;
            border: none;
            border-radius: 6px;
            background: #1877ff;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        .test-btn:hover {
            background: #0056d1;
        }
        .test-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-controls">
        <h1>Checkout Flow Test</h1>
        <div class="test-info">
            <strong>Testing Features:</strong>
            <ul>
                <li>Modal overlay with sliding views</li>
                <li>Order summary with item cards</li>
                <li>"Select Payment Method" button</li>
                <li>Slide animation to payment view</li>
                <li>Back arrow to return to summary</li>
                <li>Close button and Escape key</li>
            </ul>
        </div>
        <button class="test-btn" onclick="openCheckoutModal()">Open Checkout Modal</button>
        <button class="test-btn" onclick="testSlideToPayment()">Test Slide to Payment</button>
        <button class="test-btn" onclick="testSlideBack()">Test Slide Back</button>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="checkout-modal-overlay">
        <div class="checkout-modal-dialog">
            <div class="checkout-slider-container">

                <!-- VIEW 1: Order Summary -->
                <div class="checkout-view" id="orderSummaryView">
                    <div class="checkout-header">
                        <h2>Order Summary</h2>
                        <button type="button" class="modal-close" onclick="closeCheckoutModal()" aria-label="Close">&times;</button>
                    </div>

                    <div class="checkout-body">
                        <!-- Sample Order Items -->
                        <div class="order-items">
                            <!-- Item 1 -->
                            <div class="order-item-card">
                                <div class="item-header">
                                    <h3 class="item-title">Gold American Eagle</h3>
                                </div>

                                <div class="item-details">
                                    <div class="detail-row">
                                        <span class="detail-label">Weight:</span>
                                        <span class="detail-value">1 oz</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Mint:</span>
                                        <span class="detail-value">US Mint</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Year:</span>
                                        <span class="detail-value">2024</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Finish:</span>
                                        <span class="detail-value">Proof</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Grade:</span>
                                        <span class="detail-value">MS-70</span>
                                    </div>
                                </div>

                                <div class="item-pricing">
                                    <div class="pricing-row">
                                        <span class="pricing-label">Quantity:</span>
                                        <span class="pricing-value">5</span>
                                    </div>
                                    <div class="pricing-row">
                                        <span class="pricing-label">Average Price:</span>
                                        <span class="pricing-value">$2,150.00</span>
                                    </div>
                                    <div class="pricing-row pricing-total">
                                        <span class="pricing-label">Item Total:</span>
                                        <span class="pricing-value">$10,750.00</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Item 2 -->
                            <div class="order-item-card">
                                <div class="item-header">
                                    <h3 class="item-title">Silver Canadian Maple Leaf</h3>
                                </div>

                                <div class="item-details">
                                    <div class="detail-row">
                                        <span class="detail-label">Weight:</span>
                                        <span class="detail-value">1 oz</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Mint:</span>
                                        <span class="detail-value">Royal Canadian Mint</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Year:</span>
                                        <span class="detail-value">2025</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Finish:</span>
                                        <span class="detail-value">Brilliant Uncirculated</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Grade:</span>
                                        <span class="detail-value">MS-69</span>
                                    </div>
                                </div>

                                <div class="item-pricing">
                                    <div class="pricing-row">
                                        <span class="pricing-label">Quantity:</span>
                                        <span class="pricing-value">10</span>
                                    </div>
                                    <div class="pricing-row">
                                        <span class="pricing-label">Average Price:</span>
                                        <span class="pricing-value">$35.50</span>
                                    </div>
                                    <div class="pricing-row pricing-total">
                                        <span class="pricing-label">Item Total:</span>
                                        <span class="pricing-value">$355.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Order Total -->
                        <div class="order-total-section">
                            <div class="total-row">
                                <span class="total-label">Total</span>
                                <span class="total-value">$11,105.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Footer with Action Button -->
                    <div class="checkout-footer">
                        <button type="button" class="btn btn-primary btn-lg" onclick="showPaymentView()">
                            Select Payment Method
                        </button>
                    </div>
                </div>

                <!-- VIEW 2: Payment Selection -->
                <div class="checkout-view" id="paymentView">
                    <div class="checkout-header">
                        <button type="button" class="btn-back" onclick="showOrderSummary()">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <h2>Select Payment Option</h2>
                    </div>

                    <div class="checkout-body">
                        <div class="payment-placeholder">
                            <p class="placeholder-message">Payment options will be added here.</p>
                            <p class="placeholder-note">This is a placeholder for future payment integration.</p>
                        </div>

                        <!-- Temporary Place Order Button -->
                        <form onsubmit="handlePlaceOrder(event)">
                            <button type="submit" class="btn btn-success btn-lg">Place Order (Test)</button>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // Load checkout JS functions
        function showPaymentView() {
            const sliderContainer = document.querySelector('.checkout-slider-container');
            if (sliderContainer) {
                sliderContainer.classList.add('show-payment');
            }
        }

        function showOrderSummary() {
            const sliderContainer = document.querySelector('.checkout-slider-container');
            if (sliderContainer) {
                sliderContainer.classList.remove('show-payment');
            }
        }

        function openCheckoutModal() {
            const modal = document.getElementById('checkoutModal');
            if (modal) {
                modal.classList.add('active');
                showOrderSummary();
            }
        }

        function closeCheckoutModal() {
            const modal = document.getElementById('checkoutModal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function testSlideToPayment() {
            openCheckoutModal();
            setTimeout(() => showPaymentView(), 500);
        }

        function testSlideBack() {
            openCheckoutModal();
            showPaymentView();
            setTimeout(() => showOrderSummary(), 500);
        }

        function handlePlaceOrder(e) {
            e.preventDefault();
            alert('Order placement test - this would submit to the backend');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Close modal on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const sliderContainer = document.querySelector('.checkout-slider-container');
                    if (sliderContainer && sliderContainer.classList.contains('show-payment')) {
                        showOrderSummary();
                    } else {
                        closeCheckoutModal();
                    }
                }
            });

            // Close modal on overlay click
            const modalOverlay = document.getElementById('checkoutModal');
            if (modalOverlay) {
                modalOverlay.addEventListener('click', (e) => {
                    if (e.target === modalOverlay) {
                        closeCheckoutModal();
                    }
                });
            }
        });
    </script>
</body>
</html>
