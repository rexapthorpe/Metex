<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modal Display Fix Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    .test-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .edit-summary-grid {
      border: 1px solid #e5e7eb;
      border-radius: 20px;
      padding: 20px;
      margin: 20px 0;
    }

    .edit-summary-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .edit-summary-row:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .edit-summary-label {
      font-weight: 600;
      color: #374151;
    }

    .edit-summary-value {
      color: #1f2937;
    }

    .price-highlight {
      font-weight: 700;
      color: #059669;
    }

    .test-section {
      margin: 30px 0;
      padding: 20px;
      background: #f9fafb;
      border-radius: 8px;
    }

    .test-button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      background: #3b82f6;
      color: white;
    }

    .test-button:hover {
      background: #2563eb;
    }

    .console-log {
      background: #1f2937;
      color: #10b981;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      margin: 10px 0;
      max-height: 400px;
      overflow-y: auto;
    }

    .log-success {
      color: #10b981;
    }

    .log-info {
      color: #60a5fa;
    }

    .log-arrow {
      color: #fbbf24;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>üî¨ Modal Display Fix Verification Test</h1>

    <div class="test-section">
      <h2>Test Controls</h2>
      <button class="test-button" onclick="testEmptyStringDisplay()">Test OLD Method (display = '')</button>
      <button class="test-button" onclick="testFlexDisplay()">Test NEW Method (display = 'flex')</button>
      <button class="test-button" onclick="resetRows()">Reset All Rows</button>
    </div>

    <div class="test-section">
      <h2>Simulated Edit Listing Confirmation Modal</h2>
      <div class="edit-summary-grid">
        <div class="edit-summary-row">
          <span class="edit-summary-label">Pricing Mode:</span>
          <span class="edit-summary-value" id="edit-confirm-mode">Variable (Premium to Spot)</span>
        </div>

        <!-- Variable Pricing: Current Spot Price -->
        <div class="edit-summary-row" id="edit-confirm-current-spot-row" style="display: none;">
          <span class="edit-summary-label">Current Spot Price:</span>
          <span class="edit-summary-value" id="edit-confirm-current-spot">‚Äî</span>
        </div>

        <!-- Variable Pricing: Spot Premium -->
        <div class="edit-summary-row" id="edit-confirm-premium-row" style="display: none;">
          <span class="edit-summary-label">Premium Above Spot:</span>
          <span class="edit-summary-value" id="edit-confirm-premium">‚Äî</span>
        </div>

        <!-- Variable Pricing: Floor Price -->
        <div class="edit-summary-row" id="edit-confirm-floor-row" style="display: none;">
          <span class="edit-summary-label">Floor Price (Minimum):</span>
          <span class="edit-summary-value" id="edit-confirm-floor">‚Äî</span>
        </div>

        <!-- Variable Pricing: Current Effective Price -->
        <div class="edit-summary-row" id="edit-confirm-effective-row" style="display: none;">
          <span class="edit-summary-label">Current Effective Price:</span>
          <span class="edit-summary-value price-highlight" id="edit-confirm-effective">‚Äî</span>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h2>Console Output</h2>
      <div class="console-log" id="console-output"></div>
    </div>
  </div>

  <script>
    const consoleOutput = document.getElementById('console-output');

    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString();
      const className = `log-${type}`;
      consoleOutput.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
      console.log(message);
    }

    function resetRows() {
      const rows = [
        'edit-confirm-current-spot-row',
        'edit-confirm-premium-row',
        'edit-confirm-floor-row',
        'edit-confirm-effective-row'
      ];

      rows.forEach(rowId => {
        const row = document.getElementById(rowId);
        if (row) {
          row.style.display = 'none';
        }
      });

      // Reset text content
      document.getElementById('edit-confirm-current-spot').textContent = '‚Äî';
      document.getElementById('edit-confirm-premium').textContent = '‚Äî';
      document.getElementById('edit-confirm-floor').textContent = '‚Äî';
      document.getElementById('edit-confirm-effective').textContent = '‚Äî';

      consoleOutput.innerHTML = '';
      log('üîÑ All rows reset to display: none', 'info');
    }

    function testEmptyStringDisplay() {
      log('üß™ Testing OLD method: setting display to empty string ("")', 'info');
      log('');

      const currentSpotRow = document.getElementById('edit-confirm-current-spot-row');
      const currentSpotEl = document.getElementById('edit-confirm-current-spot');
      const premiumRow = document.getElementById('edit-confirm-premium-row');
      const premiumEl = document.getElementById('edit-confirm-premium');
      const floorRow = document.getElementById('edit-confirm-floor-row');
      const floorEl = document.getElementById('edit-confirm-floor');
      const effectiveRow = document.getElementById('edit-confirm-effective-row');
      const effectiveEl = document.getElementById('edit-confirm-effective');

      if (currentSpotRow) {
        currentSpotRow.style.display = '';
        log(`  <span class="log-arrow">‚Üí</span> currentSpotRow display set to: "${currentSpotRow.style.display}"`, 'arrow');
        log(`  <span class="log-arrow">‚Üí</span> currentSpotRow COMPUTED display: "${window.getComputedStyle(currentSpotRow).display}"`, 'arrow');
      }
      if (currentSpotEl) {
        currentSpotEl.textContent = '$4,222.77/oz';
        log(`  <span class="log-arrow">‚Üí</span> currentSpotEl text set to: ${currentSpotEl.textContent}`, 'arrow');
      }

      if (premiumRow) {
        premiumRow.style.display = '';
        log(`  <span class="log-arrow">‚Üí</span> premiumRow display set to: "${premiumRow.style.display}"`, 'arrow');
      }
      if (premiumEl) {
        premiumEl.textContent = '$500.00';
        log(`  <span class="log-arrow">‚Üí</span> premiumEl text set to: ${premiumEl.textContent}`, 'arrow');
      }

      if (floorRow) {
        floorRow.style.display = '';
        log(`  <span class="log-arrow">‚Üí</span> floorRow display set to: "${floorRow.style.display}"`, 'arrow');
      }
      if (floorEl) {
        floorEl.textContent = '$5,000.00';
        log(`  <span class="log-arrow">‚Üí</span> floorEl text set to: ${floorEl.textContent}`, 'arrow');
      }

      if (effectiveRow) {
        effectiveRow.style.display = '';
        log(`  <span class="log-arrow">‚Üí</span> effectiveRow display set to: "${effectiveRow.style.display}"`, 'arrow');
        log(`  <span class="log-arrow">‚Üí</span> effectiveRow COMPUTED display: "${window.getComputedStyle(effectiveRow).display}"`, 'arrow');
      }
      if (effectiveEl) {
        effectiveEl.textContent = '$5,000.00';
        log(`  <span class="log-arrow">‚Üí</span> effectiveEl text set to: ${effectiveEl.textContent}`, 'arrow');
      }

      log('');
      log('‚ùì Are the rows visible in the modal above? If NO, empty string does not work.', 'info');
    }

    function testFlexDisplay() {
      log('<span class="log-success">‚úÖ Testing NEW method: setting display to "flex"</span>', 'success');
      log('');

      const currentSpotRow = document.getElementById('edit-confirm-current-spot-row');
      const currentSpotEl = document.getElementById('edit-confirm-current-spot');
      const premiumRow = document.getElementById('edit-confirm-premium-row');
      const premiumEl = document.getElementById('edit-confirm-premium');
      const floorRow = document.getElementById('edit-confirm-floor-row');
      const floorEl = document.getElementById('edit-confirm-floor');
      const effectiveRow = document.getElementById('edit-confirm-effective-row');
      const effectiveEl = document.getElementById('edit-confirm-effective');

      if (currentSpotRow) {
        currentSpotRow.style.display = 'flex';
        log(`  <span class="log-arrow">‚Üí</span> currentSpotRow display set to: "${currentSpotRow.style.display}"`, 'arrow');
        log(`  <span class="log-arrow">‚Üí</span> currentSpotRow COMPUTED display: "${window.getComputedStyle(currentSpotRow).display}"`, 'arrow');
      }
      if (currentSpotEl) {
        currentSpotEl.textContent = '$4,222.77/oz';
        log(`  <span class="log-arrow">‚Üí</span> currentSpotEl text set to: ${currentSpotEl.textContent}`, 'arrow');
      }

      if (premiumRow) {
        premiumRow.style.display = 'flex';
        log(`  <span class="log-arrow">‚Üí</span> premiumRow display set to: "${premiumRow.style.display}"`, 'arrow');
      }
      if (premiumEl) {
        premiumEl.textContent = '$500.00';
        log(`  <span class="log-arrow">‚Üí</span> premiumEl text set to: ${premiumEl.textContent}`, 'arrow');
      }

      if (floorRow) {
        floorRow.style.display = 'flex';
        log(`  <span class="log-arrow">‚Üí</span> floorRow display set to: "${floorRow.style.display}"`, 'arrow');
      }
      if (floorEl) {
        floorEl.textContent = '$5,000.00';
        log(`  <span class="log-arrow">‚Üí</span> floorEl text set to: ${floorEl.textContent}`, 'arrow');
      }

      if (effectiveRow) {
        effectiveRow.style.display = 'flex';
        log(`  <span class="log-arrow">‚Üí</span> effectiveRow display set to: "${effectiveRow.style.display}"`, 'arrow');
        log(`  <span class="log-arrow">‚Üí</span> effectiveRow COMPUTED display: "${window.getComputedStyle(effectiveRow).display}"`, 'arrow');
      }
      if (effectiveEl) {
        effectiveEl.textContent = '$5,000.00';
        log(`  <span class="log-arrow">‚Üí</span> effectiveEl text set to: ${effectiveEl.textContent}`, 'arrow');
      }

      log('');
      log('<span class="log-success">‚úÖ Are the rows visible in the modal above? If YES, the fix works!</span>', 'success');
    }

    // Auto-run test on page load
    window.addEventListener('load', () => {
      log('üöÄ Test page loaded. Click buttons above to test display methods.', 'info');
      log('');
    });
  </script>
</body>
</html>
